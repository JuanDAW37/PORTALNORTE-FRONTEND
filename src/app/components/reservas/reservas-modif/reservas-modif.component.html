<main class="container border mt-2">
        <h2 class="text-center mt-2">{{titulo}}</h2>
        <form [formGroup]="modif">
            <div class="row mb-1 mt-1 form-group">
            <label class="col-3 col-form-label" [ngStyle]="{'color': facturada ? 'red' : 'blue'}">{{ sofactur }}</label>
              <!-- Número -->
              <label class="col-2 col-form-label" for="numero">Número de reserva</label>
                <div class="col-3">
                  <input type="text" id="numero" class="form-control numeros" formControlName="numero" />
                </div>
            </div>

            <div class="row mb-1 mt-1 form-group">
                <!-- Clientes -->
                <label class="col-1 col-form-label" for="clientes">Clientes<span class="importante">*</span></label>
                <div class="col-3">
                    <select class="form-select form-select-m mb-1" id="clientes" (click)="cogeCli()"
                    formControlName="cliente" name="clientes">
                      <!--Si hay clientes, recorro el array-->
                      <ng-container *ngFor="let datos of clientes">
                        <!--For each-->
                        <option [value]="datos.id">{{datos.nombre}}&nbsp;{{datos.apellido1}}</option>
                      </ng-container>
                    </select>
                    <div [hidden]="cliente.valid || cliente.pristine">
                      <span *ngIf="cliente.errors?.['required']">Se debe seleccionar un cliente</span>
                    </div>
                </div>
                <!-- Actividades -->
                <label class="col-1 col-form-label" for="actividades">Actividades<span class="importante">*</span></label>
                <div class="col-3">
                  <select class="form-select form-select-m mb-1" id="actividades" (click)="cogeActi()"
                  formControlName="actividad" name="actividades">
                    <!--Si hay actividades, recorro el array-->
                    <ng-container *ngFor="let datos of actividades">
                      <!--For each-->
                      <option [value]="datos.id">{{datos.actividad}}</option>
                    </ng-container>
                  </select>
                </div>
                <div [hidden]="actividad.valid || actividad.pristine">
                  <span *ngIf="actividad.errors?.['required']">Se debe seleccionar una actividad</span>
                </div>
              </div>
              <div class="row mb-1 mt-1 form-group">
                <!-- Cliente -->
                <label class="col-1 col-form-label" for="nombre">Nombre</label>
                <div class="col-3">
                  <input type="text" id="nombre" class="form-control" formControlName="nombre" />
                </div>
                <label class="col-1 col-form-label" for="apellido1">Apellido</label>
                <div class="col-3">
                  <input type="text" id="apellido1" class="form-control" formControlName="apellido1" />
                </div>
                <label class="col-1 col-form-label" for="apellido2">Apellido2</label>
                  <div class="col-3">
                    <input type="text" id="apellido2" class="form-control" formControlName="apellido2" />
                  </div>
              </div>

                <div class="row mb-1 mt-1 form-group">
                    <label class="col-1 col-form-label" for="nif">NIF</label>
                    <div class="col-2">
                        <input type="text" id="nif" class="form-control" formControlName="nif" />
                    </div>
                    <label class="col-1 col-form-label" for="direccion">Dirección</label>
                    <div class="col-3">
                        <input type="text" id="direccion" class="form-control" formControlName="direccion" />
                    </div>
                    <label class="col-1 col-form-label" for="cp">CP</label>
                    <div class="col-1">
                        <input type="text" id="cp" class="form-control" formControlName="cp" />
                    </div>
                    <label class="col-1 col-form-label" for="nif">Ciudad</label>
                    <div class="col-2">
                        <input type="text" id="ciudad" class="form-control" formControlName="ciudad" />
                    </div>
                </div>

            <div class="row mb-1 mt-1 form-group">
                <!--Fecha-->
                <label class="col-2 col-form-label" for="fecha">Fecha<span class="importante">*</span></label>
                <div class="col-2">
                    <input type="date" id="fecha" class="form-control" formControlName="fecha" placeholder="fecha"/>
                </div>
                <div [hidden]="fecha.valid || fecha.pristine">
                  <span *ngIf="fecha.errors?.['required']">Se debe introducir una fecha</span>
                </div>
                <!-- Hora -->
                <label class="col-1 col-form-label" for="hora">Hora<span class="importante">*</span></label>
                <div class="col-2">
                    <input type="time" id="hora" class="form-control" formControlName="hora" placeholder="hora" (blur)="crearNum()"/>
                </div>
                <div [hidden]="hora.valid || hora.pristine">
                  <span *ngIf="hora.errors?.['required']">Se debe introducir una hora</span>
                </div>
                <!--Personas-->
                    <label class="col-1 col-form-label" for="personas">Personas<span class="importante">*</span></label>
                <div class="col-2">
                    <input type="number" id="personas" class="form-control numeros" formControlName="personas" (blur)="disponible()" placeholder="personas"/>
                </div>
                <div [hidden]="personas.valid || personas.pristine">
                  <span *ngIf="personas.errors?.['required']">Se debe introducir una hora</span>
                </div>
            </div>

            <div class="row mb-1 mt-1 form-group">
                <!--Tarifa-->
                <label class="col-1 col-form-label" for="tarifa">Tarifa</label>
                <div class="col-1">
                  <input type="number" id="tarifa" class="form-control numeros" formControlName="tarifa" />
                </div>
                <!--IVA-->
                <label class="col-1 col-form-label" for="iva">IVA</label>
                <div class="col-1">
                  <input type="number" id="iva" class="form-control numeros" formControlName="iva" />
                </div>
                <!--Personas máximo-->
                <label class="col-2 col-form-label" for="persmax">Max. Personas</label>
                <div class="col-1">
                  <input type="number" id="persmax" class="form-control numeros" formControlName="maxpersonas" />
                </div>
                <!-- Duración -->
                <label class="col-1 col-form-label" for="duracion">duración</label>
                <div class="col-1">
                <input type="number" id="duracion" class="form-control numeros"  formControlName="duracion"/>
                </div>
            </div>

            <div class="row mb-1 mt-1 form-group">

            </div>

            <div class="row mb-1 mt-1 form-group">
                <div class="col-4">
                    <!--Tabla de trabajadores-->
                    <label class="col-1 col-form-label">Guía/s</label>
                    <div class="table-responsive">
                        <table class="table table-striped table-sm table-wrapper">
                            <thead>
                                <tr>
                                    <th>Nombre</th>
                                    <th colspan="2">Apellidos</th>
                                    <th>NIF</th>
                                </tr>
                            </thead>
                            <tbody>
                              <ng-container *ngIf="tablaTrab.length>0">
                                <ng-container *ngFor="let trab_ac of tablaTrab">
                                  <tr>
                                    <td hidden="true">{{trab_ac.id}}</td>
                                    <td>{{trab_ac.nombre}}</td>
                                    <td>{{trab_ac.apellido1}}</td>
                                    <td>{{trab_ac.apellido2}}</td>
                                    <td>{{trab_ac.nif}}</td>
                                  </tr>
                                </ng-container>
                              </ng-container>
                            </tbody>
                        </table>
                    </div>
                </div>

            <div class="col-4">
                <!--Tabla de materiales-->
                <label class="col-4 col-form-label">Material a usar</label>
                <div class="table-responsive">
                    <table class="table table-striped table-sm table-wrapper">
                        <thead>
                            <tr>
                                <th>Nombre</th>
                            </tr>
                        </thead>
                        <tbody>
                          <ng-container *ngIf="tablaMat.length>0">
                            <ng-container *ngFor="let mat_ac of tablaMat">
                              <tr>
                                <td hidden="true">{{mat_ac.id}}</td>
                                <td>{{mat_ac.nombre}}</td>
                              </tr>
                            </ng-container>
                          </ng-container>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="col-4">
              <!--Tabla de ubicaciones-->
              <label class="col-1 col-form-label">Ubicación/es</label>
              <div class="table-responsive">
                <table class="table table-striped table-sm table-wrapper">
                  <thead>
                    <tr>
                      <th>Nombre</th>
                      <th>Latitud</th>
                      <th>Longitud</th>
                    </tr>
                  </thead>
                  <tbody>
                    <ng-container *ngIf="tablaTrab.length>0">
                      <ng-container *ngFor="let ubi_ac of tablaUbi">
                        <tr>
                          <td hidden="true">{{ubi_ac.id}}</td>
                          <td>{{ubi_ac.nombre}}</td>
                          <td>{{ubi_ac.lat}}</td>
                          <td>{{ubi_ac.lon}}</td>
                        </tr>
                      </ng-container>
                    </ng-container>
                  </tbody>
              </table>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-6 text-primary">{{error}}</div>
    </div>

    <div class="row">
            <div class="col-6">Los campos marcados con&nbsp;<span class="importante">*</span>&nbsp;son obligatorios</div>
    </div>

    <div class="row justify-content-center mb-2">
        <div class="col-2 ml-2">
        <!-- Botón guardar-->
            <button type="button" class="btn btn-outline-success" (click)="guardar()" [disabled]="modif.invalid || this.reservas_service.estado">
            Guardar</button>
        </div>
        <div class="col-2 ml-2">
        <!-- Botón facturar-->
            <button type="button" class="btn btn-outline-info" (click)="facturar()" [disabled]="modif.invalid || this.reservas_service.estado || facturada">
            Facturar</button>
        </div>
        <div class="col-2 ml-2">
            <!-- Botón cancelar -->
            <button type="button" class="btn btn-outline-warning" (click)="cerrar()">Cerrar</button>
        </div>
      </div>
      <div class="row">
        <div class="col-6 text-primary">{{mensaje}}</div>
      </div>
    </form>
  </main>
